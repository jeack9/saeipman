<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.saeipman.app.file.mapper.FileMapper">
	<select id="selectGroupId" resultType="String">
		SELECT NVL(MAX(group_id),0)+1
		FROM file_info
	</select>

	<insert id="selectFileInsert" parameterType="FileVO">
		INSERT INTO file_info(
							  file_id,
							  file_path,
							  file_name,
							  file_type,
							  table_name,
							  file_size,
							  group_id
							  )
		VALUES (
				file_id_seq.nextval,
				#{filePath},
				#{fileName},
				#{fileType},
				#{tableName},
				#{fileSize},
				#{groupId}
				)
	</insert>
	<select id="selectFileName" resultType="String">
		select 	fi.file_name as file_name
		FROM building_info bi JOIN file_info fi
		                    ON bi.group_id = fi.group_id  
		WHERE bi.building_id = #{buildingId}
	</select>
</mapper>