<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layouts/default_layout}">

<head>
	<meta charset="UTF-8">
	<style>
		.buildingBox {
			padding-bottom: 60px;
			padding-top: 0px;
		}

		.box-part {
			background: #FFF;
			border-radius: 0;
			padding: 60px 10px;
			margin: 30px 0px;
		}

		.text {
			margin: 20px 0px;
		}

		.fa {
			color: #4183D7;
		}
	</style>
</head>

<body>
	<div class="buildingBox" layout:fragment="Main">
		<div class="row">
			<!-- Thymeleaf each -->
			<th:block th:each="building : ${list}">
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
					<div class="box-part text-center">
						<i class="fa fa-instagram fa-3x" aria-hidden="true"></i>

						<div class="title">
							<h4>[[ ${ building.buildingName } ]]</h4>
						</div>

						<div class="text">
							<p>전월 관리비 : [[ ${ building.previousMonth } ]]</p>
							<p>금월 관리비 : [[ ${ building.thisMonth } ]]</p>
						</div>

						<!-- 스프링 부트가 매칭 시켜주기에 VO에 필드명과 파라미터명 정확히 일치하게 적어주어야 한다. -->
						<!-- 날짜는 VO의 포맷으로 변환시켜서 보내주어야 한다. -->
						<button type="button"
								class="btn btn-outline-primary m-1"
								th:onclick="|location.href='@{/itemList(buildingId=${building.buildingId})}'|">관리비 항목 설정
						</button>
						<button type="button"
								class="btn btn-outline-primary m-1"
								th:onclick="|location.href='@{/detailsBillList(buildingId=${building.buildingId}, paymentMonth=${#dates.format(building.paymentMonth, 'yyyy-MM')})}'|">관리비 상세 내역
						</button>
					</div>
				</div>
			</th:block>
		</div>
		
		<!-- pagination -->
		<nav aria-label="Page navigation example">
			<ul class="pagination justify-content-center" style="margin: 0;">
				<!-- 맨 첫 페이지로 이동 : 시작 페이지(startPage)가 1보다 크면 이전 버튼 출력 -->
				<th:block th:if="${page.startPage > 1}">
					<li class="page-item">
						<a class="page-link" th:href="@{/gwanlibiList?pageNum=1}" aria-label="Previous">
							<span aria-hidden="true">&laquo;</span>
						</a>
					</li>
				</th:block>
				
				<!-- 이전 페이지 버튼 (Previous) -->
				<th:block th:if="${page.prev}">
					<li class="page-item">
						<a class="page-link" th:href="@{/gwanlibiList?pageNum={page}(page = ${page.startPage - 1})}" aria-label="Previous">
							<span aria-hidden="false">&lt;</span>
						</a>
					</li>
				</th:block>
				
				<!-- 페이지 버튼 생성 -->
				<th:block th:with="start=${page.startPage}, end=${page.endPage}">
					<li class="page-item" th:with="start=${page.startPage}, end=${page.endPage}" th:each="pageButton : ${#numbers.sequence(start, end)}">
						<a class="page-link" th:href="@{/gwanlibiList?pageNum={page} (page=${pageButton})}" th:text=${pageButton}></a>
					</li>
				</th:block>
				
				<!-- 다음 페이지 버튼 (Next) -->
				<li class="page-item" th:if="${page.next}">
					<a class="page-link" th:href="@{/gwanlibiList?pageNum={page} (page = ${page.endPage +1})}" aria-label="Next">
						<span aria-hidden="true">&gt;</span>
					</a>
				</li>

				<!-- 끝 페이지(endPage)-->
				<th:block th:if="${page.endPage < page.realEnd}">
					<li class="page-item">
						<a class="page-link" th:href="@{/gwanlibiList?pageNum={page}(page = ${page.realEnd})}" aria-label="Previous">
							<span aria-hidden="false">&raquo;</span>
						</a>
					</li>
				</th:block>
			</ul>
		</nav>
	</div>
</body>

</html>