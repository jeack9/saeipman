<div xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layouts/default_layout}"
	layout:fragment="Main" class="container-fluid pt-4 px-4">
	<form th:action="@{/buildingInsert}" method="POST" name="insertForm"
		class="row g-3" enctype="multipart/form-data">
		<div class="col-md-4">
			<label for=" file" class="form-label">빌딩 이미지</label> <input
				type="file" id="file" multiple name="files" class="form-control">
		</div>
		<div class="form-check form-switch">
			<label class="form-label"><span>자동 방생성</span> </label><input
				role="switch" type="checkbox" class="form-check-input text-end" />
		</div>
		<div>
			<input name="imdaeinId" type="hidden" value="10" id="imdaeinId"
				readonly />
		</div>
		<div class="form-group col-md-7">
			<label for="bname" class="form-label">빌딩 이름 </label> <input
				type="text" id="bname" name="buildingName" class="form-control">
		</div>
		<div class="form-group col-md-7">
			<label for="sample6_address" class="form-label"
				th:style="${'padding-right:30px'}">주소</label> <input type="button"
				onclick="sample6_execDaumPostcode()" value="주소 찾기"
				class="btn btn-outline-primary m-2"> <input type="text"
				id="sample6_address" placeholder="주소" name="doroAddr"
				class="form-control">
		</div>
		<div class="form-group col-md-7">
			<label for="sample6_detailAddress" class="form-label">상세 주소</label> <input
				type="text" id="sample6_detailAddress" placeholder="상세주소"
				name="detailsAddr" class="form-control">
		</div>

		<div class="form-group col-md-7">
			<label for="gunchookArea" class="form-label">건축면적 </label> <input
				type="text" id="gunchookArea" name="gunchookArea"
				class="form-control">
		</div>
		<div class="form-check form-switch">
			<label for="liftYn">승강기 여부 </label> <input type="checkbox"
				id="liftYn" name="liftYn" class="form-check-input text-end"
				role="switch">
		</div>
		<div class="form-group col-md-5">
			<label for="totalFloor" class="form-label">층 수 </label> <input
				type="text" id="totalFloor" name="totalFloor" class="form-control">
		</div>
		<div class="form-group col-md-5">
			<label for="floorGaguCount" class="form-label">층 별 가구수 </label> <input
				type="text" id="floorGaguCount" name="floorGaguCount"
				class="form-control">
		</div>
		<div class="form-group col-md-5">
			<label for="totalGagu" class="form-label">총 세대수 </label> <input
				type="text" id="totalGagu" name="totalGagu" class="form-control">
		</div>
		<div class="form-group col-md-5">
			<label for="parking" class="form-label">주차 가능 대수 </label> <input
				type="text" id="parking" name="parking" class="form-control">
		</div>

		<div class="form-group col-md-6">
			<label for="memo" class="form-label">비고 </label> <input type="text"
				id="memo" name="memo" class="form-control">
		</div>
		<div>
			<button type="submit" class="btn btn-outline-primary m-2">저장</button>
			<button type="button" th:onclick="|location.href='@{buildingList}'|"
				class="btn btn-outline-secondary m-2">취소</button>
		</div>
	</form>

	<script>
		$('form[name=insertForm]').on('submit', function(e) {
			e.preventDefault();

			let buildingName = $('input[name="buildingName"]');
			if (buildingName.val() == '') {
				alert('빌딩 이름을 입력해주세요.');
				buildingName.focus();
				return;
			}
			let doroAddr = $('input[name="doroAddr"]');
			if (doroAddr.val() == '') {
				alert('주소를 입력해주세요.');
				doroAddr.focus();
				return;
			}
			let detailsAddr = $('input[name="detailsAddr"]');
			if (detailsAddr.val() == '') {
				alert('상세 주소를 입력해주세요.');
				detailsAddr.focus();
				return;
			}
			let gunchookArea = $('input[name="gunchookArea"]');
			if (gunchookArea.val() == '') {
				alert('건축 면적을 입력해주세요.');
				gunchookArea.focus();
				return;
			}
			let liftYn = $('input[name="liftYn"]');
			if (liftYn.val() == '') {
				alert('승강기 여부를 선택해주세요.');
				liftYn.focus();
				return;
			}
			let totalFloor = $('input[name="totalFloor"]');
			if (totalFloor.val() == '') {
				alert('총 층수를 입력해주세요.');
				totalFloor.focus();
				return;
			}
			let floorGaguCount = $('input[name="floorGaguCount"]');
			if (floorGaguCount.val() == '') {
				alert('층별 가구수를 입력해주세요.');
				floorGaguCount.focus();
				return;
			}
			let parking = $('input[name="parking"]');
			if (parking.val() == '') {
				alert('주차 가능 대수를 입력해주세요.');
				parking.focus();
				return;
			}
			insertForm.submit();
		})

		//체크박스
		$('input:checkbox').change(function() {
			if (this.checked) {

				$(this).attr('value', 'Y');
			} else {
				$(this).attr('value', 'N');
			}
		})
	</script>

	<script
		src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script>
		function sample6_execDaumPostcode() {
			new daum.Postcode({
				oncomplete : function(data) {
					// 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

					// 각 주소의 노출 규칙에 따라 주소를 조합한다.
					// 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
					var addr = ''; // 주소 변수
					var extraAddr = ''; // 참고항목 변수

					//사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
					if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
						addr = data.roadAddress;
					} else { // 사용자가 지번 주소를 선택했을 경우(J)
						addr = data.jibunAddress;
					}

					document.getElementById("sample6_address").value = addr;
					// 커서를 상세주소 필드로 이동한다.
					document.getElementById("sample6_detailAddress").focus();
				}
			}).open();
		}
	</script>
</div>